var SimpleChart=function(a){"use strict";function b(a,b){var d,c={minValue:1/0,maxValue:-(1/0),maxLength:0};return a.forEach(function(a,e){(void 0===b||b.visible[e])&&(a.length>c.maxLength&&(c.maxLength=a.length),d=h(a),c.minValue>d.min&&(c.minValue=d.min),c.maxValue<d.max&&(c.maxValue=d.max))}),c}function c(){for(var a="0123456789ABCDEF".split(""),b="#",c=0;6>c;c++)b+=a[Math.floor(16*Math.random())];return b}function d(a){var b=a.canvas.area,c=a.canvas.context,d=a.helpers,f=a.options,g={x:-.5,y:-.5};c.fillStyle=c.strokeStyle="#000",c.lineWidth=1,c.translate(g.x,g.y);var h,i=b.start.x,j=b.end.y,k=b.height,l=b.width;f.showGrid||(k-=10,l-=10),d.minValue<0&&(j=-d.minValue/(d.maxValue-d.minValue)*k,j=Math.abs(b.height-j),j+=b.start.y),Number(j)!==j||j%1===0||f.showGrid||(j+=.5),h=l/(d.maxLength-1);for(var m=0,n=d.maxLength;n>m;m++)f.showGrid?(c.beginPath(),c.moveTo(i,j-2),c.lineTo(i,j+2),c.stroke(),j!=b.end.y&&(c.beginPath(),c.moveTo(i,b.end.y-2),c.lineTo(i,b.end.y+2),c.stroke())):(c.beginPath(),c.moveTo(i,j-2),c.lineTo(i,j+2),c.stroke()),i+=h;if(c.beginPath(),c.moveTo(b.start.x,b.start.y),c.lineTo(b.start.x,b.end.y),c.stroke(),f.showGrid){for(e(a),c.beginPath(),c.moveTo(b.start.x,b.end.y),c.lineTo(b.end.x,b.end.y),c.stroke(),j!=b.end.y&&(c.beginPath(),c.moveTo(b.start.x,j),c.lineTo(b.end.x,j),c.stroke()),m=0,i=b.start.x;n>m;m++)c.beginPath(),c.moveTo(i,b.start.y-2),c.lineTo(i,b.start.y+2),c.stroke(),i+=h;c.beginPath(),c.moveTo(b.start.x,b.start.y),c.lineTo(b.end.x,b.start.y),c.stroke(),c.beginPath(),c.moveTo(b.end.x,b.start.y),c.lineTo(b.end.x,b.end.y),c.stroke()}else c.beginPath(),c.moveTo(b.start.x,j),c.lineTo(b.end.x,j),c.stroke(),c.beginPath(),c.moveTo(b.end.x-7,j-3),c.lineTo(b.end.x-7,j+3),c.lineTo(b.end.x,j),c.fill(),c.beginPath(),c.moveTo(b.start.x-3,b.start.y+7),c.lineTo(b.start.x+3,b.start.y+7),c.lineTo(b.start.x,b.start.y),c.fill();c.translate(-g.x,-g.y)}function e(a){var b=a.canvas.area,c=a.canvas.context,d=a.helpers,e=a.options,f=b.width;e.showGrid||(f-=10);var g,h=d.maxLength-1;for(g=f/h,c.strokeStyle="#CCC",i=1,j=h;i<j;i++)c.beginPath(),c.moveTo(g*i+b.start.x,b.start.y),c.lineTo(g*i+b.start.x,b.end.y),c.stroke();c.strokeStyle="#000"}function f(a){var b=a.colors,c=a.labels,d=document.getElementById(a.id+"-labels");if(null!==d){d.innerHTML="";var e;e=document.getElementById("SimpleChart-styles"),(null===e||void 0===e)&&(e=document.createElement("style"),e.id="SimpleChart-styles",e.type="text/css",e.innerHTML=".simplechart-label{font-family:Arial;font-size:12px;} .simplechart-label div {border-radius:3px;border-style:solid;border-width:2px;display:inline-block;height:5px;margin-right:5px;width:30px;}",document.getElementsByTagName("head")[0].appendChild(e));var f,g,h;c.forEach(function(c,e){g=document.createElement("div"),g.style.borderColor=b[e].line,g.style.backgroundColor=b[e].point,h=document.createElement("span"),h.appendChild(document.createTextNode(c)),f=document.createElement("div"),f.className="simplechart-label",f.addEventListener("click",function(){a.toggleVisible(e),a.draw()}),f.appendChild(g),f.appendChild(h),d.appendChild(f)})}}function g(a){var j,k,m,b=a.canvas.area,d=a.colors,e=a.canvas.context,f=a.helpers,g=a.options,h=a.points,i=a.visible,l={x:0,y:0};k=b.height,m=b.width,g.showGrid||(k-=10,m-=10),j=m/(f.maxLength-1);var n,o;h.forEach(function(a,g){if(i[g]){e.lineWidth=1,e.lineJoin="round",n=o=c(),void 0===d&&(d=new Array),void 0===d[g]?d[g]={line:null,point:null}:(void 0!==d[g].line&&(n=d[g].line),void 0!==d[g].point&&(o=d[g].point)),d[g].line=n,d[g].point=o,l.x=b.start.x;var g=0;e.beginPath(),a.forEach(function(a){return void 0===a&&(e.strokeStyle=n,e.stroke(),e.beginPath(),g=0),null===a||void 0===a?void(l.x+=j):(l.y=(a-f.minValue)/(f.maxValue-f.minValue)*k,l.y=Math.abs(b.height-l.y),0==g?e.moveTo(l.x,l.y+b.start.y):e.lineTo(l.x,l.y+b.start.y),l.x+=j,void g++)}),e.strokeStyle=n,e.stroke(),l.x=b.start.x,a.forEach(function(a){return null===a||void 0===a?void(l.x+=j):(l.y=(a-f.minValue)/(f.maxValue-f.minValue)*k,l.y=Math.abs(b.height-l.y),e.beginPath(),e.arc(l.x,l.y+b.start.y,1.5,0,2*Math.PI),e.fillStyle=o,e.fill(),void(l.x+=j))})}}),a.colors=d}function h(a){var b=1/0,c=-(1/0);return a.forEach(function(a){void 0!==a&&null!==a&&(a>c&&(c=a),b>a&&(b=a))}),{min:b,max:c}}function k(a){a.canvas.area={start:{x:15,y:15},end:{x:a.canvas.object.width-15,y:a.canvas.object.height-15},height:a.canvas.object.height-30,width:a.canvas.object.width-30}}function l(a,b){void 0===b&&(b=[]),a.labels=b,a.points.forEach(function(b,c){void 0===a.labels[c]&&(a.labels[c]="No Data")})}function m(a,b){void 0!==b&&(b.fullSize===!0&&(a.options.fullSize=!0),b.showGrid===!0&&(a.options.showGrid=!0))}function n(a){var b=new Array;return a.forEach(function(a,c){b[c]=!0}),b}this.draw=function(){this.setFullSize(),k(this),this.paint()},this.paint=function(){d(this),g(this),f(this)},this.setFullSize=function(){var a=this.canvas.object.parentElement;this.options.fullSize&&(this.canvas.object.width=a.offsetWidth,void 0===a.style.height||null===a.style.height||""===a.style.height?this.canvas.object.height=.61803*this.canvas.object.width:this.canvas.object.height=parseFloat(a.style.height))},this.setUnvisible=function(a){void 0!==this.visible[a]&&(this.visible[a]=!1,this.helpers=b(this.points,this))},this.setVisible=function(a){void 0!==this.visible[a]&&(this.visible[a]=!0,this.helpers=b(this.points,this))},this.toggleVisible=function(a){void 0!==this.visible[a]&&(this.visible[a]=!this.visible[a],this.helpers=b(this.points,this))},this.id=a.id,this.canvas={},this.options={fullSize:!1,showGrid:!1,startOnZero:!1},this.colors=a.colors,this.visible=n(a.points),this.points=a.points,this.helpers=b(this.points),l(this,a.labels),m(this,a.options);var o=this;window.addEventListener("DOMContentLoaded",function(){o.canvas.object=document.getElementById(a.id),o.canvas.context=o.canvas.object.getContext("2d"),o.draw()}),window.addEventListener("resize",function(){o.draw()})};
