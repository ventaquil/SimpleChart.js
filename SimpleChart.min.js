var SimpleChart=function(a){function b(a){var c,b={minValue:1/0,maxValue:-(1/0),maxLength:0};return a.forEach(function(a){a.length>b.maxLength&&(b.maxLength=a.length),c=h(a),b.minValue>c.min&&(b.minValue=c.min),b.maxValue<c.max&&(b.maxValue=c.max)}),b}function c(){for(var a="0123456789ABCDEF".split(""),b="#",c=0;6>c;c++)b+=a[Math.floor(16*Math.random())];return b}function d(a){var b=a.canvas.area,c=a.canvas.context,d=a.helpers,f=a.options,g={x:-.5,y:-.5};c.fillStyle=c.strokeStyle="#000",c.lineWidth=1,c.translate(g.x,g.y);var h,k=b.start.x,l=b.end.y,m=b.height,n=b.width;for(f.showGrid||(m-=10,n-=10),d.minValue<0&&(l=-d.minValue/(d.maxValue-d.minValue)*m,l=Math.abs(b.height-l),l+=b.start.y),Number(l)!==l||l%1===0||f.showGrid||(l+=.5),h=n/(d.maxLength-1),i=0,j=d.maxLength;i<j;i++)f.showGrid?(c.beginPath(),c.moveTo(k,l-2),c.lineTo(k,l+2),c.stroke(),l!=b.end.y&&(c.beginPath(),c.moveTo(k,b.end.y-2),c.lineTo(k,b.end.y+2),c.stroke())):(c.beginPath(),c.moveTo(k,l-2),c.lineTo(k,l+2),c.stroke()),k+=h;if(c.beginPath(),c.moveTo(b.start.x,b.start.y),c.lineTo(b.start.x,b.end.y),c.stroke(),f.showGrid){for(e(a),c.beginPath(),c.moveTo(b.start.x,b.end.y),c.lineTo(b.end.x,b.end.y),c.stroke(),l!=b.end.y&&(c.beginPath(),c.moveTo(b.start.x,l),c.lineTo(b.end.x,l),c.stroke()),i=0,k=b.start.x;i<j;i++)c.beginPath(),c.moveTo(k,b.start.y-2),c.lineTo(k,b.start.y+2),c.stroke(),k+=h;c.beginPath(),c.moveTo(b.start.x,b.start.y),c.lineTo(b.end.x,b.start.y),c.stroke(),c.beginPath(),c.moveTo(b.end.x,b.start.y),c.lineTo(b.end.x,b.end.y),c.stroke()}else c.beginPath(),c.moveTo(b.start.x,l),c.lineTo(b.end.x,l),c.stroke(),c.beginPath(),c.moveTo(b.end.x-7,l-3),c.lineTo(b.end.x-7,l+3),c.lineTo(b.end.x,l),c.fill(),c.beginPath(),c.moveTo(b.start.x-3,b.start.y+7),c.lineTo(b.start.x+3,b.start.y+7),c.lineTo(b.start.x,b.start.y),c.fill();c.translate(-g.x,-g.y)}function e(a){var b=a.canvas.area,c=a.canvas.context,d=a.helpers,e=a.options,f=b.width;e.showGrid||(f-=10);var g,h=d.maxLength-1;for(g=f/h,c.strokeStyle="#CCC",i=1,j=h;i<j;i++)c.beginPath(),c.moveTo(g*i+b.start.x,b.start.y),c.lineTo(g*i+b.start.x,b.end.y),c.stroke();c.strokeStyle="#000"}function f(a){var b=a.colors,c=a.labels,d=document.getElementById(a.id+"-labels");if(null!==d){d.innerHTML="";var e,f;c.forEach(function(a,c){f=document.createElement("div"),f.style.border="2px solid "+b[c].line,f.style.borderRadius="3px",f.style.backgroundColor=b[c].point,f.style.width="30px",f.style.display="inline-block",f.style.marginRight="5px",f.style.height="5px",e=document.createElement("div"),e.className="label",e.style.fontSize="12px",e.style.fontFamily="Arial",e.appendChild(f),e.appendChild(document.createTextNode(a)),d.appendChild(e)})}}function g(a){var i,j,l,b=a.canvas.area,d=a.colors,e=a.canvas.context,f=a.helpers,g=a.options,h=a.points,k={x:0,y:0};j=b.height,l=b.width,g.showGrid||(j-=10,l-=10),i=l/(f.maxLength-1),h.forEach(function(a,g){e.lineWidth=1,e.lineJoin="round",lineColor=pointColor=c(),void 0===d&&(d=new Array),void 0===d[g]?d[g]={line:null,point:null}:(void 0!==d[g].line&&(lineColor=d[g].line),void 0!==d[g].point&&(pointColor=d[g].point)),d[g].line=lineColor,d[g].point=pointColor,k.x=b.start.x;var g=0;e.beginPath(),a.forEach(function(a){return void 0===a&&(e.strokeStyle=lineColor,e.stroke(),e.beginPath(),g=0),null===a||void 0===a?void(k.x+=i):(k.y=(a-f.minValue)/(f.maxValue-f.minValue)*j,k.y=Math.abs(b.height-k.y),0==g?e.moveTo(k.x,k.y+b.start.y):e.lineTo(k.x,k.y+b.start.y),k.x+=i,void g++)}),e.strokeStyle=lineColor,e.stroke(),k.x=b.start.x,a.forEach(function(a){return null===a||void 0===a?void(k.x+=i):(k.y=(a-f.minValue)/(f.maxValue-f.minValue)*j,k.y=Math.abs(b.height-k.y),e.beginPath(),e.arc(k.x,k.y+b.start.y,1.5,0,2*Math.PI),e.fillStyle=pointColor,e.fill(),void(k.x+=i))})}),a.colors=d}function h(a){var b=1/0,c=-(1/0);return a.forEach(function(a){void 0!==a&&null!==a&&(a>c&&(c=a),b>a&&(b=a))}),{min:b,max:c}}function k(a){a.canvas.area={start:{x:15,y:15},end:{x:a.canvas.object.width-15,y:a.canvas.object.height-15},height:a.canvas.object.height-30,width:a.canvas.object.width-30}}function l(a,b){void 0===b&&(b=[]),a.labels=b,a.points.forEach(function(b,c){void 0===a.labels[c]&&(a.labels[c]="No Data")})}function m(a,b){void 0!==b&&(b.fullSize===!0&&(a.options.fullSize=!0),b.showGrid===!0&&(a.options.showGrid=!0))}this.draw=function(){this.setFullSize(),k(this),this.paint()},this.paint=function(){d(this),g(this),f(this)},this.setFullSize=function(){var a=this.canvas.object.parentElement;this.options.fullSize&&(this.canvas.object.width=a.offsetWidth,void 0===a.style.height||null===a.style.height||""===a.style.height?this.canvas.object.height=.61803*this.canvas.object.width:this.canvas.object.height=parseFloat(a.style.height))},this.id=a.id,this.canvas={},this.options={fullSize:!1,showGrid:!1,startOnZero:!1},this.colors=a.colors,this.points=a.points,this.helpers=b(this.points),l(this,a.labels),m(this,a.options);var n=this;window.addEventListener("DOMContentLoaded",function(){n.canvas.object=document.getElementById(a.id),n.canvas.context=n.canvas.object.getContext("2d"),n.draw()}),window.addEventListener("resize",function(){n.draw()})};
